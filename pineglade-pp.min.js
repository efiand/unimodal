(()=>{"use strict";const e=["a[href]","button:not(:disabled)","input:not(:disabled)","textarea:not(:disabled)","select:not(:disabled)",'[tabindex]:not([tabindex^="-"])'].join(", ");class t{constructor(e,t="modal--"){this._el=e,this._id=this._el.dataset.modal,this._namePrefix=t,this._elSelector=`.${this._namePrefix.replace(/[-_]/g,"")}`,this._allFocusables=[],this._setListeners(),this._el.classList.add(`${this._namePrefix}ready`)}get _firstFocusable(){const[t]=this._el.querySelectorAll(e);return t}_setListeners(){this._handleOpen=this._handleOpen.bind(this),this._handleBtnClose=this._handleBtnClose.bind(this),this._handleOverlayClose=this._handleOverlayClose.bind(this),this._handleKeyClose=this._handleKeyClose.bind(this),this._handleFocus=this._handleFocus.bind(this),this._el.addEventListener("click",this._handleOverlayClose);for(const e of document.querySelectorAll(`[data-modal-open="${this._id}"]`))e.addEventListener("click",this._handleOpen);for(const e of document.querySelectorAll(`[data-modal-close="${this._id}"]`))e.addEventListener("click",this._handleBtnClose)}_open(){document.documentElement.style.marginRight=`${Math.max(window.innerWidth-document.documentElement.clientWidth,0)}px`,document.documentElement.style.overflow="hidden",document.addEventListener("keydown",this._handleKeyClose),this._focusables=document.querySelectorAll(e);for(const e of this._focusables)e.addEventListener("focus",this._handleFocus);this._el.classList.add(`${this._namePrefix}opened`)}_close(){this._el.classList.remove(`${this._namePrefix}opened`),document.removeEventListener("keydown",this._handleKeyClose),document.documentElement.style.marginRight="0",document.documentElement.style.overflow="auto";for(const e of this._focusables)e.removeEventListener("focus",this._handleFocus)}_handleOpen(e){e.preventDefault(),this._open()}_handleBtnClose(e){e.preventDefault(),this._close()}_handleOverlayClose(e){e.target===this._el&&this._close()}_handleKeyClose(e){"Esc"!==e.key&&"Escape"!==e.key||(e.preventDefault(),this._close())}_handleFocus(){document.activeElement.closest(this._elSelector)!==this._el&&this._firstFocusable.focus()}}const{MODAL_SELECTOR:s=".modal",MODAL_PREFIX:n="modal--"}=window;for(const e of document.querySelectorAll(s))new t(e,n)})();